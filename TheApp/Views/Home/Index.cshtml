<div id="SiteContent">
    @{
        ViewData["Title"] = "tHEaPP";
    }

    @{
        if((int)ViewData["FirstLoad"] == 0)
        {
            Layout = "";
        }
    }
    <div class="text-center">
        <h1 class="display-4">Welcome to tHEaPP</h1>
    </div>

    <div class="tab-container">
        <div class="tab-buttons">
            <div class="tab-button active" onclick="openTab('tab1')">Choose By Map</div>
            <div class="tab-button" onclick="openTab('tab2')">Choose By Genre</div>
        </div>
        <div class="tab-content active" id="tab1">

            <h2>US Map</h2>

            <button id="update">Click Here</button>

            <div class="map-container">

            <div id="map" class="jvmap-smart"></div>

            </div>
            </div>
           
        <div class="tab-content" id="tab2">
            <h2>Genre List</h2>
            <p>Good Music and the back up dancers.</p>
        </div>
    </div>

    <script>
        function openTab(tabId) {
            // Hide all tab content
            var tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(function (content) {
                content.classList.remove('active');
            });

            // Remove active class from all tabs
            var tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(function (button) {
                button.classList.remove('active');
            });

            // Show the selected tab content
            document.getElementById(tabId).classList.add('active');

            // Add active class to the clicked tab button
            event.currentTarget.classList.add('active');
        }

        function openNestedTab(tabId) {
            // Hide all nested tab content
            var nestedTabContents = document.querySelectorAll('.nested-tab-container .tab-content');
            nestedTabContents.forEach(function (content) {
                content.classList.remove('active');
            });

            // Remove active class from all nested tabs
            var nestedTabButtons = document.querySelectorAll('.nested-tab-container .tab-button');
            nestedTabButtons.forEach(function (button) {
                button.classList.remove('active');
            });

            // Show the selected nested tab content
            document.getElementById(tabId).classList.add('active');

            // Add active class to the clicked nested tab button
            event.currentTarget.classList.add('active');
        }
    </script>

    <script>
        $(function () {
            var palette = ['#000000', '#948D8D', '#F3ECEC', '#CDCDCD', '#867F7F'];
            generateColors = function () {
                var colors = {},
                    key;

                for (key in map.regions) {
                    colors[key] = palette[Math.floor(Math.random() * palette.length)];
                }
                return colors;
            },
                map;

            map = new jvm.Map({
                map: 'us_lcc',
                container: $('#map'),
                series: {
                    regions: [{
                        attribute: 'fill'
                    }]
                },
                onRegionClick: function (event, code) {
                    $.ajax({
                        url: '/Home/State',
                        type: 'POST',
                        data: { stateCode: code },
                        success: function (response) {
                            var map = $('#map').vectorMap('get', 'mapObject');
                            map.tip.hide();
                            $('#SiteContent').html(response);

                        },
                        error: function (xhr, status, error) {
                            console.log(xhr.responseText);
                            alert('Error making AJAX call.');
                        }
                    });


                }

            });
            map.series.regions[0].setValues(generateColors());
            $('#update').click(function (e) {
                e.preventDefault();
                map.series.regions[0].setValues(generateColors());
            });
        });
    </script>

    <p>@ViewData["path"]</p>
    
</div>